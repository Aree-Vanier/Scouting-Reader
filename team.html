<link rel="stylesheet" type="text/css" href="style.css">

<script>
	const {ipcRenderer} = require('electron')
	var team = null;
		
	console.log("INIT");
	
	function win_close(){
		ipcRenderer.send('window-close', "team:"+team);
	}
	function win_max() {
		console.log(team);
		ipcRenderer.send('window-max', "team:"+team);
	}
	function win_min() {
		ipcRenderer.send('window-min', "team:"+team);
	}
	
	ipcRenderer.on("set-team", function(e, number){
		console.log(number);
		window.team = number;
		ipcRenderer.send("get-data", number);
	});
	
	function start_window(window){
		ipcRenderer.send('start-window', window);
		console.log("Starting "+window);
	}
	
	templates = {
		"general":"<h1>$NUMBER</h1>\n<ul>\n<li>$NAME</li>\n<li>Ranking: $RANK ($RPA RPA)</li>\n<li>OPR:$OPR</li>\n<li>DRP:$DPR</li>\n</ul>\n",
		"tele":"<a><h1>Teleop</h1></a>\n<ul>\n<li>$MAX_CUBES</li>\n<li>$AVERAGE_CUBES</li>\n<li>$AVERAGE_SCALE_CUBES</li>\n<li>$MAX_SCALE_CUBES</li>\n<li>$AVERAGE_SWITCH_CUBES</li>\n<li>$MAX_SWITCH_CUBES</li>\n<li>$AVERAGE_VAULT_CUBES</li>\n<li>$MAX_VAULT_CUBES</li>\n</ul>"
	}
	
	ipcRenderer.on("set-data", function(e, data){
		console.log(data);
		document.getElementById("general").innerHTML=templates["general"].replace("$NUMBER", data["general"]["number"])
																		 .replace("$NAME", data["general"]["name"])
																		 .replace("$RANK", data["general"]["rank"])
																		 .replace("$RPA", data["general"]["rpa"])	
																		 .replace("$OPR", data["general"]["opr"])
																		 .replace("$DPR", data["general"]["dpr"])
																		 
		document.getElementById("tele").innerHTML=templates["tele"].replace("$MAX_CUBES", "Average Cubes: "+data["averages"]["Average Total"])
																		 .replace("$AVERAGE_CUBES", "Max Cubes: "+data["averages"]["Max Total"])
																		 .replace("$AVERAGE_SCALE_CUBES", "Average Scale: "+data["averages"]["Average Scale"])
																		 .replace("$MAX_SCALE_CUBES", "Max Scale: "+data["averages"]["Max Scale"])
																		 .replace("$AVERAGE_SWITCH_CUBES", "Average Switch: "+data["averages"]["Average Switch"])	
																		 .replace("$MAX_SWITCH_CUBES", "Max Switch: "+data["averages"]["Max Switch"])
																		 .replace("$AVERAGE_VAULT_CUBES", "Average Vault: "+data["averages"]["Average Vault"])
																		 .replace("$MAX_VAULT_CUBES", "Max Vault: "+data["averages"]["Max Vault"])
	});
	
</script>

<body>
	<header>
		<a class="close" id="close" onclick="win_close()">&times;</a>
		<a class="close" id="max" onclick="win_max()">&square;</a>
		<a class="close" id="min" onclick="win_min()">&#95;</a>
	</header>
	
    <div class="flex">
      <div class="flex" style="flex-grow:1; flex-direction:column; margin-top:0px">
      <section class="infoPanel" id="general">
        <a><h1>General</h1></a>
        asdjklfhasdjklf
        asldkjfh<br/>asdfasdfasdf<br/>cadcasd
      </section>
      
      <section class="infoPanel" id="pit">
        <a><h1>Pit Scouting</h1></a>
          <ul>
            <li>
              Mechanism: Elevator
            </li>
            <li>
              Speed: Fast
            </li>
            <li>
              Drivetrain: Ideal
            </li>
            <li>
              Skill: Highly Variable
            </li>
          </ul>
      </section>  
      </div>


      <img class="robotImage" src="https://i.imgur.com/uMdFbCvm.jpg">
      </img>  

      <section class="infoPanel" id="auto">
        <a onclick = "start_window('auto')"><h1>Auto</h1></a>
          <ul>
            <li>
              Cubes: 3
            </li>
            <li>
              Location: Switch
            </li>
            <li>
              Accuracy: Good
            </li>
          </ul>
      </section>

      <section class="infoPanel" id="tele">    
        <a><h1>Tele</h1></a>
      </section>
    </div>
	<footer>
	
	</footer>
</body>
